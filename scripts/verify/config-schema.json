{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Configuration Schema",
  "description": "Schema for config.json - defines project configuration settings",
  "type": "object",
  "required": ["directories", "buildTools", "testing", "linting", "requirements", "ui", "scripts", "mockData", "benchmarks", "website", "miscScripts"],
  "properties": {
    "baseUrl": {
      "type": "string",
      "format": "uri",
      "description": "Base URL for the application"
    },
    "directories": {
      "type": "object",
      "required": ["appDir", "testConfigDir", "scriptsDir", "assetsDir", "nodeModulesDir", "websiteDir", "templatesDir", "staticDir"],
      "properties": {
        "appDir": {
          "type": "string",
          "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*$",
          "description": "Directory containing framework apps"
        },
        "testConfigDir": {
          "type": "string",
          "description": "Directory for test configurations"
        },
        "scriptsDir": {
          "type": "string",
          "description": "Directory for project scripts"
        },
        "assetsDir": {
          "type": "string",
          "description": "Directory for shared assets"
        },
        "nodeModulesDir": {
          "type": "string",
          "description": "Node modules directory name"
        },
        "websiteDir": {
          "type": "string",
          "description": "Website files directory"
        },
        "templatesDir": {
          "type": "string", 
          "description": "HTML templates directory"
        },
        "staticDir": {
          "type": "string",
          "description": "Static assets directory"
        }
      },
      "additionalProperties": false
    },
    "buildTools": {
      "type": "object",
      "required": ["requiresNpx", "pythonCommands"],
      "properties": {
        "requiresNpx": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tools that require npx prefix"
        },
        "pythonCommands": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^python.*"
          },
          "description": "Python server commands to try"
        }
      },
      "additionalProperties": false
    },
    "testing": {
      "type": "object",
      "required": ["defaultTimeout", "maxRetries", "testReporter", "testCommand", "configPathTemplate"],
      "properties": {
        "defaultTimeout": {
          "type": "integer",
          "minimum": 1,
          "description": "Default test timeout in seconds"
        },
        "maxRetries": {
          "type": "integer",
          "minimum": 0,
          "description": "Maximum test retries"
        },
        "testReporter": {
          "type": "string",
          "enum": ["list", "json", "html"],
          "description": "Test reporter format"
        },
        "testCommand": {
          "type": "string",
          "pattern": "^npx playwright test",
          "description": "Base test command"
        },
        "configPathTemplate": {
          "type": "string",
          "pattern": ".*\\{framework\\}.*",
          "description": "Template for test config paths"
        }
      },
      "additionalProperties": false
    },
    "linting": {
      "type": "object",
      "required": ["tool", "maxMessageLength", "excludePrefixes", "errorPatterns", "warningPatterns"],
      "properties": {
        "tool": {
          "type": "string",
          "enum": ["eslint"],
          "description": "Linting tool to use"
        },
        "maxMessageLength": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum length for lint messages"
        },
        "excludePrefixes": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Prefixes to exclude from lint output"
        },
        "errorPatterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Regex patterns to match lint errors"
        },
        "warningPatterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Regex patterns to match lint warnings"
        }
      },
      "additionalProperties": false
    },
    "requirements": {
      "type": "object",
      "required": ["nodeVersion", "tools"],
      "properties": {
        "nodeVersion": {
          "type": "integer",
          "minimum": 12,
          "description": "Minimum required Node.js version"
        },
        "tools": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z_][a-zA-Z0-9_]*$": {
              "type": "string",
              "description": "Command to check tool version"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "ui": {
      "type": "object",
      "required": ["progressDelay", "passRateThresholds"],
      "properties": {
        "progressDelay": {
          "type": "number",
          "minimum": 0,
          "description": "Delay between progress updates in seconds"
        },
        "passRateThresholds": {
          "type": "object",
          "required": ["excellent", "good", "warning"],
          "properties": {
            "excellent": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            },
            "good": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            },
            "warning": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "scripts": {
      "type": "object",
      "required": ["essentialCommands", "sectionHeaders", "sectionSeparators"],
      "properties": {
        "essentialCommands": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z_][a-zA-Z0-9_]*$": {
              "type": "string",
              "description": "Essential script commands"
            }
          },
          "additionalProperties": false
        },
        "sectionHeaders": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "sectionSeparators": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "mockData": {
      "type": "object",
      "required": ["weatherApi"],
      "properties": {
        "weatherApi": {
          "type": "object",
          "required": ["defaultLocation", "seed", "outputPath", "variationRange"],
          "properties": {
            "defaultLocation": {
              "type": "object",
              "required": ["latitude", "longitude", "timezone", "name", "country"],
              "properties": {
                "latitude": {
                  "type": "number",
                  "minimum": -90,
                  "maximum": 90
                },
                "longitude": {
                  "type": "number",
                  "minimum": -180,
                  "maximum": 180
                },
                "timezone": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "country": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "seed": {
              "type": "integer",
              "minimum": 0
            },
            "outputPath": {
              "type": "string",
              "pattern": ".*\\.json$"
            },
            "variationRange": {
              "type": "object",
              "required": ["temperature", "humidity", "pressure"],
              "properties": {
                "temperature": {
                  "type": "integer",
                  "minimum": 0
                },
                "humidity": {
                  "type": "integer",
                  "minimum": 0
                },
                "pressure": {
                  "type": "integer",
                  "minimum": 0
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "benchmarks": {
      "type": "object",
      "required": ["server", "lighthouse", "output"],
      "properties": {
        "server": {
          "type": "object",
          "required": ["host", "port", "baseUrl", "healthEndpoint"],
          "properties": {
            "host": {
              "type": "string",
              "description": "Server host address"
            },
            "port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535,
              "description": "Server port number"
            },
            "baseUrl": {
              "type": "string",
              "format": "uri",
              "description": "Base URL for benchmarks"
            },
            "healthEndpoint": {
              "type": "string",
              "pattern": "^/.*",
              "description": "Health check endpoint path"
            }
          },
          "additionalProperties": false
        },
        "lighthouse": {
          "type": "object",
          "required": ["categories", "settings", "thresholds"],
          "properties": {
            "categories": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["performance", "accessibility", "best-practices", "seo", "pwa"]
              },
              "description": "Lighthouse categories to test"
            },
            "settings": {
              "type": "object",
              "required": ["onlyCategories", "output", "chromeFlags"],
              "properties": {
                "onlyCategories": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "output": {
                  "type": "string",
                  "enum": ["json", "html", "csv"]
                },
                "chromeFlags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "thresholds": {
              "type": "object",
              "patternProperties": {
                "^[a-zA-Z-]+$": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 100
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "output": {
          "type": "object",
          "required": ["directory", "formats", "timestamp"],
          "properties": {
            "directory": {
              "type": "string",
              "description": "Output directory for benchmark results"
            },
            "formats": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["json", "html", "csv"]
              },
              "description": "Output formats"
            },
            "timestamp": {
              "type": "boolean",
              "description": "Include timestamp in output files"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "website": {
      "type": "object",
      "required": ["title", "description", "paths", "deployment"],
      "properties": {
        "title": {
          "type": "string",
          "minLength": 1,
          "description": "Website title"
        },
        "description": {
          "type": "string",
          "minLength": 1,
          "description": "Website description"
        },
        "paths": {
          "type": "object",
          "required": ["homepage", "frameworkLanding", "frameworkApp", "frameworkSource", "notFound"],
          "properties": {
            "homepage": {
              "type": "string",
              "description": "Homepage URL pattern"
            },
            "frameworkLanding": {
              "type": "string",
              "description": "Framework landing page URL pattern"
            },
            "frameworkApp": {
              "type": "string",
              "description": "Framework app URL pattern"
            },
            "frameworkSource": {
              "type": "string",
              "description": "Framework source URL pattern"
            },
            "notFound": {
              "type": "string",
              "description": "404 page URL"
            }
          },
          "additionalProperties": false
        },
        "deployment": {
          "type": "object",
          "required": ["outputDir", "baseUrl", "copyAssets"],
          "properties": {
            "outputDir": {
              "type": "string",
              "description": "Static build output directory"
            },
            "baseUrl": {
              "type": "string",
              "description": "Base URL for deployed site"
            },
            "copyAssets": {
              "type": "boolean",
              "description": "Whether to copy static assets"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "miscScripts": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name", "command"],
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1
          },
          "command": {
            "type": "string",
            "minLength": 1
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
