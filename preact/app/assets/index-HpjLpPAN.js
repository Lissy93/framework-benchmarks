(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const _ of a.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&n(_)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var j,g,ye,$,se,we,be,ke,te,Z,J,U={},Se=[],Ue=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,G=Array.isArray;function W(t,e){for(var r in e)t[r]=e[r];return t}function re(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function s(t,e,r){var n,o,a,_={};for(a in e)a=="key"?n=e[a]:a=="ref"?o=e[a]:_[a]=e[a];if(arguments.length>2&&(_.children=arguments.length>3?j.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)_[a]===void 0&&(_[a]=t.defaultProps[a]);return R(t,_,n,o,null)}function R(t,e,r,n,o){var a={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++ye,__i:-1,__u:0};return o==null&&g.vnode!=null&&g.vnode(a),a}function x(t){return t.children}function q(t,e){this.props=t,this.context=e}function T(t,e){if(e==null)return t.__?T(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?T(t):null}function Pe(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Pe(t)}}function _e(t){(!t.__d&&(t.__d=!0)&&$.push(t)&&!V.__r++||se!=g.debounceRendering)&&((se=g.debounceRendering)||we)(V)}function V(){for(var t,e,r,n,o,a,_,l=1;$.length;)$.length>l&&$.sort(be),t=$.shift(),l=$.length,t.__d&&(r=void 0,o=(n=(e=t).__v).__e,a=[],_=[],e.__P&&((r=W({},n)).__v=n.__v+1,g.vnode&&g.vnode(r),ne(e.__P,r,n,e.__n,e.__P.namespaceURI,32&n.__u?[o]:null,a,o??T(n),!!(32&n.__u),_),r.__v=n.__v,r.__.__k[r.__i]=r,$e(a,r,_),r.__e!=o&&Pe(r)));V.__r=0}function We(t,e,r,n,o,a,_,l,d,c,h){var i,f,u,m,S,k,p=n&&n.__k||Se,v=e.length;for(d=Ne(r,e,p,d,v),i=0;i<v;i++)(u=r.__k[i])!=null&&(f=u.__i==-1?U:p[u.__i]||U,u.__i=i,k=ne(t,u,f,o,a,_,l,d,c,h),m=u.__e,u.ref&&f.ref!=u.ref&&(f.ref&&oe(f.ref,null,u),h.push(u.ref,u.__c||m,u)),S==null&&m!=null&&(S=m),4&u.__u||f.__k===u.__k?d=Ee(u,d,t):typeof u.type=="function"&&k!==void 0?d=k:m&&(d=m.nextSibling),u.__u&=-7);return r.__e=S,d}function Ne(t,e,r,n,o){var a,_,l,d,c,h=r.length,i=h,f=0;for(t.__k=new Array(o),a=0;a<o;a++)(_=e[a])!=null&&typeof _!="boolean"&&typeof _!="function"?(d=a+f,(_=t.__k[a]=typeof _=="string"||typeof _=="number"||typeof _=="bigint"||_.constructor==String?R(null,_,null,null,null):G(_)?R(x,{children:_},null,null,null):_.constructor==null&&_.__b>0?R(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):_).__=t,_.__b=t.__b+1,l=null,(c=_.__i=Fe(_,r,d,i))!=-1&&(i--,(l=r[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(o>h?f--:o<h&&f++),typeof _.type!="function"&&(_.__u|=4)):c!=d&&(c==d-1?f--:c==d+1?f++:(c>d?f--:f++,_.__u|=4))):t.__k[a]=null;if(i)for(a=0;a<h;a++)(l=r[a])!=null&&!(2&l.__u)&&(l.__e==n&&(n=T(l)),Le(l,l));return n}function Ee(t,e,r){var n,o;if(typeof t.type=="function"){for(n=t.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=t,e=Ee(n[o],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=T(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Fe(t,e,r,n){var o,a,_,l=t.key,d=t.type,c=e[r],h=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||h&&l==c.key&&d==c.type)return r;if(n>(h?1:0)){for(o=r-1,a=r+1;o>=0||a<e.length;)if((c=e[_=o>=0?o--:a++])!=null&&!(2&c.__u)&&l==c.key&&d==c.type)return _}return-1}function ce(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||Ue.test(e)?r:r+"px"}function z(t,e,r,n,o){var a,_;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||ce(t.style,e,"");if(r)for(e in r)n&&r[e]==n[e]||ce(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(ke,"$1")),_=e.toLowerCase(),e=_ in t||e=="onFocusOut"||e=="onFocusIn"?_.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=r,r?n?r.u=n.u:(r.u=te,t.addEventListener(e,a?J:Z,a)):t.removeEventListener(e,a?J:Z,a);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function le(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=te++;else if(e.t<r.u)return;return r(g.event?g.event(e):e)}}}function ne(t,e,r,n,o,a,_,l,d,c){var h,i,f,u,m,S,k,p,v,H,E,I,M,ie,A,C,K,P=e.type;if(e.constructor!=null)return null;128&r.__u&&(d=!!(32&r.__u),a=[l=e.__e=r.__e]),(h=g.__b)&&h(e);e:if(typeof P=="function")try{if(p=e.props,v="prototype"in P&&P.prototype.render,H=(h=P.contextType)&&n[h.__c],E=h?H?H.props.value:h.__:n,r.__c?k=(i=e.__c=r.__c).__=i.__E:(v?e.__c=i=new P(p,E):(e.__c=i=new q(p,E),i.constructor=P,i.render=Ie),H&&H.sub(i),i.props=p,i.state||(i.state={}),i.context=E,i.__n=n,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&P.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=W({},i.__s)),W(i.__s,P.getDerivedStateFromProps(p,i.__s))),u=i.props,m=i.state,i.__v=e,f)v&&P.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&P.getDerivedStateFromProps==null&&p!==u&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(p,E),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(p,i.__s,E)===!1||e.__v==r.__v){for(e.__v!=r.__v&&(i.props=p,i.state=i.__s,i.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(L){L&&(L.__=e)}),I=0;I<i._sb.length;I++)i.__h.push(i._sb[I]);i._sb=[],i.__h.length&&_.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(p,i.__s,E),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(u,m,S)})}if(i.context=E,i.props=p,i.__P=t,i.__e=!1,M=g.__r,ie=0,v){for(i.state=i.__s,i.__d=!1,M&&M(e),h=i.render(i.props,i.state,i.context),A=0;A<i._sb.length;A++)i.__h.push(i._sb[A]);i._sb=[]}else do i.__d=!1,M&&M(e),h=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++ie<25);i.state=i.__s,i.getChildContext!=null&&(n=W(W({},n),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(S=i.getSnapshotBeforeUpdate(u,m)),C=h,h!=null&&h.type===x&&h.key==null&&(C=De(h.props.children)),l=We(t,G(C)?C:[C],e,r,n,o,a,_,l,d,c),i.base=e.__e,e.__u&=-161,i.__h.length&&_.push(i),k&&(i.__E=i.__=null)}catch(L){if(e.__v=null,d||a!=null)if(L.then){for(e.__u|=d?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,e.__e=l}else{for(K=a.length;K--;)re(a[K]);Q(e)}else e.__e=r.__e,e.__k=r.__k,L.then||Q(e);g.__e(L,e,r)}else a==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=xe(r.__e,e,r,n,o,a,_,d,c);return(h=g.diffed)&&h(e),128&e.__u?void 0:l}function Q(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Q)}function $e(t,e,r){for(var n=0;n<r.length;n++)oe(r[n],r[++n],r[++n]);g.__c&&g.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(a){a.call(o)})}catch(a){g.__e(a,o.__v)}})}function De(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:G(t)?t.map(De):W({},t)}function xe(t,e,r,n,o,a,_,l,d){var c,h,i,f,u,m,S,k=r.props,p=e.props,v=e.type;if(v=="svg"?o="http://www.w3.org/2000/svg":v=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(c=0;c<a.length;c++)if((u=a[c])&&"setAttribute"in u==!!v&&(v?u.localName==v:u.nodeType==3)){t=u,a[c]=null;break}}if(t==null){if(v==null)return document.createTextNode(p);t=document.createElementNS(o,v,p.is&&p),l&&(g.__m&&g.__m(e,a),l=!1),a=null}if(v==null)k===p||l&&t.data==p||(t.data=p);else{if(a=a&&j.call(t.childNodes),k=r.props||U,!l&&a!=null)for(k={},c=0;c<t.attributes.length;c++)k[(u=t.attributes[c]).name]=u.value;for(c in k)if(u=k[c],c!="children"){if(c=="dangerouslySetInnerHTML")i=u;else if(!(c in p)){if(c=="value"&&"defaultValue"in p||c=="checked"&&"defaultChecked"in p)continue;z(t,c,null,u,o)}}for(c in p)u=p[c],c=="children"?f=u:c=="dangerouslySetInnerHTML"?h=u:c=="value"?m=u:c=="checked"?S=u:l&&typeof u!="function"||k[c]===u||z(t,c,u,k[c],o);if(h)l||i&&(h.__html==i.__html||h.__html==t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(i&&(t.innerHTML=""),We(e.type=="template"?t.content:t,G(f)?f:[f],e,r,n,v=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,_,a?a[0]:r.__k&&T(r,0),l,d),a!=null)for(c=a.length;c--;)re(a[c]);l||(c="value",v=="progress"&&m==null?t.removeAttribute("value"):m!=null&&(m!==t[c]||v=="progress"&&!m||v=="option"&&m!=k[c])&&z(t,c,m,k[c],o),c="checked",S!=null&&S!=t[c]&&z(t,c,S,k[c],o))}return t}function oe(t,e,r){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(o){g.__e(o,r)}}function Le(t,e,r){var n,o;if(g.unmount&&g.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||oe(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(a){g.__e(a,e)}n.base=n.__P=null}if(n=t.__k)for(o=0;o<n.length;o++)n[o]&&Le(n[o],e,r||typeof t.type!="function");r||re(t.__e),t.__c=t.__=t.__e=void 0}function Ie(t,e,r){return this.constructor(t,r)}function Ae(t,e,r){var n,o,a,_;e==document&&(e=document.documentElement),g.__&&g.__(t,e),o=(n=!1)?null:e.__k,a=[],_=[],ne(e,t=e.__k=s(x,null,[t]),o||U,U,e.namespaceURI,o?null:e.firstChild?j.call(e.childNodes):null,a,o?o.__e:e.firstChild,n,_),$e(a,t,_)}j=Se.slice,g={__e:function(t,e,r,n){for(var o,a,_;e=e.__;)if((o=e.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(t)),_=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,n||{}),_=o.__d),_)return o.__E=o}catch(l){t=l}throw t}},ye=0,q.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=W({},this.state),typeof t=="function"&&(t=t(W({},r),this.props)),t&&W(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),_e(this))},q.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),_e(this))},q.prototype.render=x,$=[],we=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,be=function(t,e){return t.__v.__b-e.__v.__b},V.__r=0,ke=/(PointerCapture)$|Capture$/i,te=0,Z=le(!1),J=le(!0);var N,y,Y,ue,F=0,Te=[],w=g,de=w.__b,fe=w.__r,he=w.diffed,me=w.__c,pe=w.unmount,ve=w.__;function ae(t,e){w.__h&&w.__h(y,t,F||e),F=0;var r=y.__H||(y.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function D(t){return F=1,ze(Ce,t)}function ze(t,e,r){var n=ae(N++,2);if(n.t=t,!n.__c&&(n.__=[Ce(void 0,e),function(l){var d=n.__N?n.__N[0]:n.__[0],c=n.t(d,l);d!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=y,!y.__f)){var o=function(l,d,c){if(!n.__c.__H)return!0;var h=n.__c.__H.__.filter(function(f){return!!f.__c});if(h.every(function(f){return!f.__N}))return!a||a.call(this,l,d,c);var i=n.__c.props!==l;return h.forEach(function(f){if(f.__N){var u=f.__[0];f.__=f.__N,f.__N=void 0,u!==f.__[0]&&(i=!0)}}),a&&a.call(this,l,d,c)||i};y.__f=!0;var a=y.shouldComponentUpdate,_=y.componentWillUpdate;y.componentWillUpdate=function(l,d,c){if(this.__e){var h=a;a=void 0,o(l,d,c),a=h}_&&_.call(this,l,d,c)},y.shouldComponentUpdate=o}return n.__N||n.__}function X(t,e){var r=ae(N++,3);!w.__s&&Me(r.__H,e)&&(r.__=t,r.u=e,y.__H.__h.push(r))}function Oe(t){return F=5,He(function(){return{current:t}},[])}function He(t,e){var r=ae(N++,7);return Me(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}function O(t,e){return F=8,He(function(){return t},e)}function Re(){for(var t;t=Te.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(B),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],w.__e(e,t.__v)}}w.__b=function(t){y=null,de&&de(t)},w.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),ve&&ve(t,e)},w.__r=function(t){fe&&fe(t),N=0;var e=(y=t.__c).__H;e&&(Y===y?(e.__h=[],y.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(B),e.__h.forEach(ee),e.__h=[],N=0)),Y=y},w.diffed=function(t){he&&he(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Te.push(e)!==1&&ue===w.requestAnimationFrame||((ue=w.requestAnimationFrame)||qe)(Re)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Y=y=null},w.__c=function(t,e){e.some(function(r){try{r.__h.forEach(B),r.__h=r.__h.filter(function(n){return!n.__||ee(n)})}catch(n){e.some(function(o){o.__h&&(o.__h=[])}),e=[],w.__e(n,r.__v)}}),me&&me(t,e)},w.unmount=function(t){pe&&pe(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{B(n)}catch(o){e=o}}),r.__H=void 0,e&&w.__e(e,r.__v))};var ge=typeof requestAnimationFrame=="function";function qe(t){var e,r=function(){clearTimeout(n),ge&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,35);ge&&(e=requestAnimationFrame(r))}function B(t){var e=y,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),y=e}function ee(t){var e=y;t.__c=t.__(),y=e}function Me(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function Ce(t,e){return typeof e=="function"?e(t):e}class Be{constructor(){this.baseUrl="https://api.open-meteo.com/v1",this.geocodingUrl="https://geocoding-api.open-meteo.com/v1",this.useMockData=this.shouldUseMockData()}shouldUseMockData(){const e=navigator.userAgent.includes("Playwright")||navigator.userAgent.includes("HeadlessChrome")||window.location.search.includes("mock=true");return window.location.search.includes("mock=false")?!1:window.location.search.includes("mock=true")||e}async getMockData(){try{this.isTestEnvironment()&&await new Promise(r=>setTimeout(r,200));const e=await fetch("/mocks/weather-data.json");if(!e.ok)throw new Error("Failed to load mock data");return await e.json()}catch(e){throw console.error("Error loading mock data:",e),e}}isTestEnvironment(){return navigator.userAgent.includes("Playwright")||navigator.userAgent.includes("HeadlessChrome")}getMockGeocodingData(e){const r={London:{latitude:51.5074,longitude:-.1278,name:"London",country:"United Kingdom"},Tokyo:{latitude:35.6762,longitude:139.6503,name:"Tokyo",country:"Japan"},Paris:{latitude:48.8566,longitude:2.3522,name:"Paris",country:"France"},"São Paulo":{latitude:-23.5505,longitude:-46.6333,name:"São Paulo",country:"Brazil"},"New York":{latitude:40.7128,longitude:-74.006,name:"New York",country:"United States"},Zürich:{latitude:47.3769,longitude:8.5417,name:"Zürich",country:"Switzerland"}};if(e.includes("Invalid")||e.includes("123")||!e.trim())throw new Error("Unable to find location. Please check the city name and try again.");const n=r[e];return n||(console.warn(`Unknown city: ${e}, falling back to London`),r.London)}async geocodeLocation(e){if(this.useMockData)return this.getMockGeocodingData(e);try{const r=await fetch(`${this.geocodingUrl}/search?name=${encodeURIComponent(e)}&count=1&language=en&format=json`);if(!r.ok)throw new Error("Geocoding failed");const n=await r.json();if(!n.results||n.results.length===0)throw new Error("Location not found");const o=n.results[0];return{latitude:o.latitude,longitude:o.longitude,name:o.name,country:o.country}}catch(r){throw console.error("Geocoding error:",r),new Error("Unable to find location. Please check the city name and try again.")}}async getWeatherData(e,r){if(this.useMockData)return await this.getMockData();try{const n=new URLSearchParams({latitude:e.toString(),longitude:r.toString(),daily:"temperature_2m_max,temperature_2m_min,weather_code,sunrise,sunset,rain_sum,uv_index_max,precipitation_probability_max",current:"temperature_2m,relative_humidity_2m,apparent_temperature,is_day,snowfall,showers,rain,precipitation,weather_code,cloud_cover,pressure_msl,surface_pressure,wind_direction_10m,wind_gusts_10m,wind_speed_10m",timezone:"GMT"}),o=await fetch(`${this.baseUrl}/forecast?${n}`);if(!o.ok)throw new Error(`Weather API error: ${o.status}`);return await o.json()}catch(n){throw console.error("Weather API error:",n),new Error("Unable to fetch weather data. Please try again later.")}}async getWeatherByCity(e){try{const r=await this.geocodeLocation(e);return{...await this.getWeatherData(r.latitude,r.longitude),locationName:r.name,country:r.country}}catch(r){throw console.error("Weather service error:",r),r}}getCurrentLocationWeather(){return new Promise((e,r)=>{if(!navigator.geolocation){r(new Error("Geolocation not supported"));return}navigator.geolocation.getCurrentPosition(async n=>{try{const{latitude:o,longitude:a}=n.coords,_=await this.getWeatherData(o,a);e({..._,locationName:"Current Location"})}catch(o){r(o)}},n=>r(n),{timeout:1e4,enableHighAccuracy:!1,maximumAge:3e5})})}}const Ve=()=>{const[t,e]=D(null),[r,n]=D(!0),[o,a]=D(null),[_]=D(()=>new Be),l=Oe(0),d=O(async f=>{const u=++l.current;try{n(!0),a(null),Ge()&&await new Promise(S=>setTimeout(S,100));const m=await _.getWeatherByCity(f);if(u===l.current){e(m);try{localStorage.setItem("weather-app-location",f)}catch(S){console.warn("Could not save location to localStorage:",S)}}}catch(m){u===l.current&&(a(m.message),console.error("Weather hook error:",m))}finally{u===l.current&&n(!1)}},[_]),c=O(async()=>{try{n(!0),a(null);const f=await _.getCurrentLocationWeather();e(f)}catch(f){a(f.message),console.error("Current location error:",f)}finally{n(!1)}},[_]),h=O(async()=>{try{a(null);const f=je();if(f){await d(f);return}if(_.useMockData){await d("London");return}try{await c()}catch(u){console.warn("Could not get current location:",u),await d("London")}}catch(f){console.error("Failed to initialize weather data:",f),a("Failed to load weather data"),n(!1)}},[d,c,_]);X(()=>{h()},[h]);const i=O(()=>{a(null)},[]);return{weatherData:t,isLoading:r,error:o,loadWeather:d,getCurrentLocationWeather:c,initialize:h,clearError:i}};function je(){try{return localStorage.getItem("weather-app-location")}catch(t){return console.warn("Could not load saved location:",t),null}}function Ge(){return navigator.userAgent.includes("Playwright")||navigator.userAgent.includes("HeadlessChrome")}const Ke=({isLoading:t=!1,currentLocation:e=null,onSearch:r})=>{const[n,o]=D(""),[a,_]=D(!1);return X(()=>{const d=Ye();d&&(o(d),_(!0))},[]),X(()=>{e&&!n&&!a&&o(e)},[e,n,a]),s("section",{class:"search-section"},s("form",{class:"search-form","data-testid":"search-form",onSubmit:d=>{d.preventDefault();const c=n==null?void 0:n.trim();c&&(r==null||r(c))}},s("div",{class:"search-form__group"},s("label",{for:"location-input",class:"sr-only"},"Enter city name"),s("input",{value:n,onInput:d=>o(d.target.value),type:"text",id:"location-input",class:"search-input",placeholder:"Enter city name...","data-testid":"search-input",autocomplete:"off"}),s("button",{type:"submit",class:"search-button","data-testid":"search-button",disabled:t},s("span",{class:"search-button__text"},t?"Loading...":"Get Weather"),s("span",{class:"search-button__icon"},"🌦️")))))};function Ye(){try{return localStorage.getItem("weather-app-location")}catch(t){return console.warn("Could not load saved location:",t),null}}const Ze=({isVisible:t=!1})=>s("div",{class:"loading","data-testid":"loading",hidden:!t},s("div",{class:"loading__spinner"}),s("p",null,"Loading weather data...")),Je=({isVisible:t=!1,message:e=""})=>s("div",{class:"error","data-testid":"error",hidden:!t},s("p",{class:"error__message"},e));class b{static getWeatherDescription(e){return{0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Slight snow fall",73:"Moderate snow fall",75:"Heavy snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"}[e]||"Unknown"}static getWeatherIcon(e,r=!0){return e===0?r?"☀️":"🌙":e<=3?r?"⛅":"☁️":e<=48?"🌫️":e<=57||e>=80&&e<=82||e>=61&&e<=67?"🌧️":e>=71&&e<=77?"❄️":e>=85&&e<=86?"🌨️":e>=95?"⛈️":"🌤️"}static formatTemperature(e){return`${Math.round(e)}°C`}static formatWindSpeed(e){return`${Math.round(e)} km/h`}static formatPressure(e){return`${Math.round(e)} hPa`}static formatPercentage(e){return`${Math.round(e)}%`}static getWindDirection(e){const r=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],n=Math.round(e/22.5)%16;return r[n]}static formatDate(e){const r=new Date(e),n=new Date,o=new Date(n);return o.setDate(n.getDate()+1),r.toDateString()===n.toDateString()?"Today":r.toDateString()===o.toDateString()?"Tomorrow":r.toLocaleDateString("en-US",{weekday:"long"})}static formatTime(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}static getConditionClass(e){return e===0?"weather-condition-sunny":e<=3?"weather-condition-cloudy":e>=51&&e<=67||e>=80&&e<=82?"weather-condition-rainy":e>=95?"weather-condition-stormy":"weather-condition-cloudy"}static debounce(e,r){let n;return function(...a){const _=()=>{clearTimeout(n),e(...a)};clearTimeout(n),n=setTimeout(_,r)}}}const Qe=({weatherData:t})=>{var _;if(!t)return null;const e=t.current,r=`${t.locationName}${t.country?`, ${t.country}`:""}`,n=b.getWeatherIcon(e.weather_code,e.is_day),o=b.getWeatherDescription(e.weather_code),a=b.getConditionClass(e.weather_code);return s("div",null,s("h2",{class:"section-title"},"Current Weather"),s("section",{class:`current-weather weather-card ${a}`,"data-testid":"current-weather"},s("div",{class:"current-weather__header"},s("h3",{class:"current-weather__location","data-testid":"current-location"},r)),s("div",{class:"current-weather__main"},s("div",{class:"current-weather__temp","data-testid":"current-temp"},s("span",{"data-testid":"current-temperature"},b.formatTemperature(e.temperature_2m))),s("div",{class:"current-weather__icon","data-testid":"weather-icon"},s("span",{"data-testid":"current-icon"},n))),s("div",{class:"current-weather__condition","data-testid":"weather-condition"},o),s("div",{class:"current-weather__details"},s("div",{class:"weather-detail"},s("span",{class:"weather-detail__label"},"Feels like"),s("span",{class:"weather-detail__value","data-testid":"feels-like"},b.formatTemperature(e.apparent_temperature))),s("div",{class:"weather-detail"},s("span",{class:"weather-detail__label"},"Humidity"),s("span",{class:"weather-detail__value","data-testid":"humidity"},b.formatPercentage(e.relative_humidity_2m))),s("div",{class:"weather-detail"},s("span",{class:"weather-detail__label"},"Wind"),s("span",{class:"weather-detail__value","data-testid":"wind"},s("span",{"data-testid":"wind-speed"},b.formatWindSpeed(e.wind_speed_10m))," ",b.getWindDirection(e.wind_direction_10m))),s("div",{class:"weather-detail"},s("span",{class:"weather-detail__label"},"Pressure"),s("span",{class:"weather-detail__value","data-testid":"pressure"},b.formatPressure(e.pressure_msl))),s("div",{class:"weather-detail"},s("span",{class:"weather-detail__label"},"Cloud Cover"),s("span",{class:"weather-detail__value","data-testid":"cloud-cover"},b.formatPercentage(e.cloud_cover))),s("div",{class:"weather-detail"},s("span",{class:"weather-detail__label"},"Precipitation"),s("span",{class:"weather-detail__value","data-testid":"precipitation"},(_=e.precipitation)==null?void 0:_.toFixed(1)," mm")))))},Xe=({daily:t,index:e,isActive:r=!1,onToggle:n})=>{var f,u;const o=b.formatDate(t.time[e]),a=t.weather_code[e],_=t.temperature_2m_max[e],l=t.temperature_2m_min[e],d=b.getWeatherDescription(a),c=b.getWeatherIcon(a),h=()=>{n==null||n(e)},i=m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),n==null||n(e))};return s("div",{class:`forecast-item ${r?"active":""}`,"data-testid":"forecast-item",tabindex:"0",role:"button","aria-label":`View detailed forecast for ${o}`,onClick:h,onKeyDown:i},s("div",{class:"forecast-item__day"},o),s("div",{class:"forecast-item__icon"},c),s("div",{class:"forecast-item__info"},s("div",{class:"forecast-item__condition"},d),s("div",{class:"forecast-item__temps","data-testid":"forecast-temps"},s("span",{class:"forecast-item__high","data-testid":"forecast-high"},b.formatTemperature(_)),s("span",{class:"forecast-item__low","data-testid":"forecast-low"},b.formatTemperature(l)))),r&&s("div",{class:"forecast-item__details"},s("div",{class:"forecast-detail-item"},s("div",{class:"forecast-detail-item__label"},"Sunrise"),s("div",{class:"forecast-detail-item__value"},b.formatTime(t.sunrise[e]))),s("div",{class:"forecast-detail-item"},s("div",{class:"forecast-detail-item__label"},"Sunset"),s("div",{class:"forecast-detail-item__value"},b.formatTime(t.sunset[e]))),s("div",{class:"forecast-detail-item"},s("div",{class:"forecast-detail-item__label"},"Rain"),s("div",{class:"forecast-detail-item__value"},(f=t.rain_sum[e])==null?void 0:f.toFixed(1)," mm")),s("div",{class:"forecast-detail-item"},s("div",{class:"forecast-detail-item__label"},"UV Index"),s("div",{class:"forecast-detail-item__value"},(u=t.uv_index_max[e])==null?void 0:u.toFixed(1))),s("div",{class:"forecast-detail-item"},s("div",{class:"forecast-detail-item__label"},"Precipitation"),s("div",{class:"forecast-detail-item__value"},b.formatPercentage(t.precipitation_probability_max[e]))),s("div",{class:"forecast-detail-item"},s("div",{class:"forecast-detail-item__label"},"Temperature"),s("div",{class:"forecast-detail-item__value"},b.formatTemperature(l)," to ",b.formatTemperature(_)))))},et=({weatherData:t=null})=>{const[e,r]=D(null),n=o=>{e===o?r(null):(r(o),setTimeout(()=>{const a=document.querySelector(".forecast-item.active");a&&a.scrollIntoView({behavior:"smooth",block:"nearest"})},100))};return t?s("section",{class:"forecast-section"},s("h2",{class:"section-title"},"7-Day Forecast"),s("div",{class:"forecast"},s("div",{class:"forecast__list","data-testid":"forecast-list"},t.daily.time.slice(0,7).map((o,a)=>s(Xe,{key:a,daily:t.daily,index:a,isActive:e===a,onToggle:n}))))):null},tt=({isVisible:t=!1,weatherData:e=null})=>s("div",{class:"weather-content","data-testid":"weather-content",hidden:!t},s("div",{class:"weather-layout"},s(Qe,{weatherData:e}),s(et,{weatherData:e})));function rt(){const{weatherData:t,isLoading:e,error:r,loadWeather:n}=Ve(),o=async _=>{await n(_)},a=t==null?void 0:t.locationName;return s(x,null,s("header",{class:"header"},s("div",{class:"container"},s("h1",{class:"header__title"},"Weather Front"))),s("main",{class:"main"},s("div",{class:"container"},s(Ke,{isLoading:e,currentLocation:a,onSearch:o}),s("div",{class:"weather-container","data-testid":"weather-container"},s(Ze,{isVisible:e}),s(Je,{isVisible:!!r&&!e,message:r}),s(tt,{isVisible:!!t&&!e&&!r,weatherData:t})))),s("footer",{class:"footer"},s("div",{class:"container"},s("p",{class:"footer__text"},"Built with Preact • MIT License •",s("a",{href:"https://github.com/Lissy93",class:"footer__link",target:"_blank",rel:"noopener"},"Alicia Sykes")))))}Ae(s(rt,null),document.getElementById("app"));
